---
interface Project {
  title: string;
  description: string;
  stack?: string[];         
  backend?: string;          
  deploy?: string;          
  demoUrl?: string;          
  repoUrl?: string;          
}

interface Props {
  project: Project;
  delay?: number;
}

const { project, delay = 0 } = Astro.props;
const stackLine = [
  project.stack?.join(" + "),
  project.backend ? `Backend: ${project.backend}` : undefined,
  project.deploy ? `Deploy: ${project.deploy}` : undefined,
]
  .filter(Boolean)
  .join(" · ");
---

<article
  class="bg-gray-800 border border-gray-700 rounded-2xl p-6 shadow-xl transition-all duration-300 ease-in-out hover:-translate-y-2 flex flex-col h-full animate-slide-up"
  style={`animation-delay: ${delay}ms;`}
  aria-label={`Proyecto: ${project.title}`}
>
  <header class="mb-4">
    {stackLine && (
      <div class="flex flex-wrap gap-2 mb-3">
        {project.stack && (
          <span class="inline-flex items-center gap-2 bg-purple-600/20 text-purple-200 text-xs font-semibold px-3 py-1 rounded-full">
            Stack: {project.stack.join(" + ")}
          </span>
        )}
        {project.backend && (
          <span class="inline-flex items-center gap-2 bg-emerald-600/20 text-emerald-200 text-xs font-semibold px-3 py-1 rounded-full">
            Backend: {project.backend}
          </span>
        )}
        {project.deploy && (
          <span class="inline-flex items-center gap-2 bg-blue-600/20 text-blue-200 text-xs font-semibold px-3 py-1 rounded-full">
            Deploy: {project.deploy}
          </span>
        )}
      </div>
    )}

    <h3 class="text-2xl font-extrabold text-purple-300">
      {project.title}
    </h3>
  </header>

  <p class="text-gray-300/95 leading-relaxed flex-grow">
    {project.description}
  </p>

  <footer class="mt-6 pt-4 border-t border-gray-700/50 flex items-center justify-between gap-3">
    {project.demoUrl && (
      <a
        href={project.demoUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 text-blue-300 hover:text-blue-200 font-semibold"
        aria-label={`Abrir demo de ${project.title}`}
      >
        Ver página
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
        </svg>
      </a>
    )}

    {project.repoUrl && (
      <a
        href={project.repoUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="ml-auto text-gray-400 hover:text-white"
        aria-label={`Abrir repositorio de ${project.title} en GitHub`}
        title="GitHub"
      >
        <svg class="w-7 h-7" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M12 2C6.48 2 2 6.48 2 12a10 10 0 006.84 9.49c.5.09.68-.22.68-.48 0-.24-.01-.87-.01-1.7-2.78.61-3.37-1.34-3.37-1.34-.45-1.16-1.11-1.47-1.11-1.47-.9-.62.07-.61.07-.61 1 .07 1.53 1.03 1.53 1.03.89 1.53 2.34 1.09 2.91.83.09-.65.35-1.09.64-1.34-2.22-.25-4.56-1.11-4.56-4.95 0-1.09.39-1.99 1.03-2.69-.1-.25-.45-1.27.1-2.65 0 0 .84-.27 2.75 1.03a9.6 9.6 0 015.01 0c1.91-1.3 2.75-1.03 2.75-1.03.55 1.38.2 2.4.1 2.65.64.7 1.03 1.6 1.03 2.69 0 3.84-2.34 4.69-4.57 4.94.36.31.68.92.68 1.86 0 1.34-.01 2.42-.01 2.75 0 .27.18.58.69.48A10 10 0 0022 12c0-5.52-4.48-10-10-10z" />
        </svg>
      </a>
    )}
  </footer>
</article>
